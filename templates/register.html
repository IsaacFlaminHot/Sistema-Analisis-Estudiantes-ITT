{% extends 'base.html' %}
{% block title %}Registro{% endblock %}
{% block content %}
<div class="row justify-content-center">
	<div class="col-md-6">
		<div class="card">
			<div class="card-header">Crear cuenta</div>
			<div class="card-body">
				<form method="post">
					<div class="mb-3">
						<label class="form-label">Nombre</label>
						<input type="text" name="nombre" class="form-control" required>
					</div>
					<div class="mb-3">
						<label class="form-label">Correo</label>
						<input type="email" name="email" class="form-control" required>
					</div>
					<div class="mb-3">
						<label class="form-label">Contraseña</label>
						<input type="password" name="password" class="form-control" required>
					</div>
					<div class="mb-3">
						<label class="form-label">Tipo de usuario</label>
						<select name="rol" class="form-select" id="rol-select" required>
							<option value="docente">Docente</option>
							<option value="administrador">Administrador</option>
						</select>
					</div>
					<div class="mb-3" id="carrera-field">
						<label class="form-label">Carrera <span class="text-danger">*</span></label>
						<select name="carrera_id" class="form-select" id="carrera-select">
							<option value="">Seleccione una carrera</option>
							{% for c in carreras %}
							<option value="{{ c.id }}">{{ c.nombre }}</option>
							{% endfor %}
						</select>
						<small class="text-muted">Los docentes deben seleccionar una carrera</small>
					</div>
					<button class="btn btn-success">Registrar</button>
					<a href="/auth/login" class="btn btn-link">Ya tengo cuenta</a>
				</form>
			</div>
		</div>
	</div>
</div>
<script>
	// Mostrar/ocultar campo de carrera según el rol
	document.getElementById('rol-select').addEventListener('change', function() {
		const carreraField = document.getElementById('carrera-field');
		const carreraSelect = document.getElementById('carrera-select');
		
		if (this.value === 'administrador') {
			carreraField.style.display = 'none';
			carreraSelect.removeAttribute('required');
			carreraSelect.value = '';
		} else {
			carreraField.style.display = 'block';
			carreraSelect.setAttribute('required', 'required');
		}
	});
</script>
{% endblock %}

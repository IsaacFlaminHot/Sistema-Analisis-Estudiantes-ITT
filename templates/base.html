<!doctype html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{% block title %}Sistema de Análisis{% endblock %}</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
	<style>
		@font-face {
			font-family: 'PPNeueMachina';
			src: url('{{ url_for("static", filename="fonts/PPNeueMachina-Regular.otf") }}') format('opentype');
			font-weight: normal;
			font-style: normal;
			font-display: swap;
		}
		
		:root {
			--apple-black: #000000;
			--apple-dark-gray: #1d1d1f;
			--apple-gray: #86868b;
			--apple-light-gray: #f5f5f7;
			--apple-blue: #0071e3;
			--apple-blue-hover: #0077ed;
		}
		
		* {
			transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		body {
			background: #000000;
			font-family: 'PPNeueMachina', -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
			color: #f5f5f7;
			letter-spacing: -0.011em;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}
		
		.navbar {
			background: rgba(0, 0, 0, 0.8) !important;
			backdrop-filter: saturate(180%) blur(20px);
			-webkit-backdrop-filter: saturate(180%) blur(20px);
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
			box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
			padding: 0.75rem 0;
			position: relative;
			z-index: 1050;
		}
		
		.navbar-brand {
			font-family: 'PPNeueMachina', sans-serif;
			font-weight: normal;
			font-size: 1.25rem;
			color: #f5f5f7 !important;
			letter-spacing: -0.02em;
		}
		
		.nav-link {
			color: #86868b !important;
			font-weight: 400;
			font-size: 0.9375rem;
			padding: 0.5rem 1rem !important;
			border-radius: 8px;
		}
		
		.nav-link:hover {
			background: rgba(255, 255, 255, 0.05);
			color: #f5f5f7 !important;
		}
		
		.dropdown-menu {
			background: rgba(29, 29, 31, 0.95);
			backdrop-filter: saturate(180%) blur(20px);
			-webkit-backdrop-filter: saturate(180%) blur(20px);
			border: 0.5px solid rgba(255, 255, 255, 0.1);
			border-radius: 12px;
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
			padding: 0.5rem;
			margin-top: 0.5rem;
			z-index: 1060 !important;
			position: absolute !important;
		}
		
		.nav-item.dropdown {
			position: relative;
			z-index: 1050;
		}
		
		.dropdown-item {
			color: #f5f5f7 !important;
			padding: 0.625rem 1rem;
			border-radius: 8px;
			font-size: 0.9375rem;
		}
		
		.dropdown-item:hover {
			background: rgba(255, 255, 255, 0.08);
		}
		
		.card {
			background: rgba(29, 29, 31, 0.6);
			backdrop-filter: blur(20px);
			border-radius: 18px;
			border: 0.5px solid rgba(255, 255, 255, 0.1);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
			overflow: hidden;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.card:hover {
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
			transform: translateY(-2px);
			border-color: rgba(255, 255, 255, 0.15);
		}
		
		.card-header {
			background: rgba(29, 29, 31, 0.8);
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
			padding: 1.25rem 1.5rem;
			font-family: 'PPNeueMachina', sans-serif;
			font-weight: normal;
			font-size: 1.0625rem;
			color: #f5f5f7;
			letter-spacing: -0.01em;
		}
		
		.card-body {
			padding: 1.5rem;
			color: #f5f5f7;
		}
		
		.btn-primary {
			background: #0071e3;
			border: none;
			border-radius: 12px;
			font-weight: 500;
			font-size: 0.9375rem;
			padding: 0.625rem 1.25rem;
			letter-spacing: -0.01em;
			color: #ffffff;
		}
		
		.btn-primary:hover {
			background: #0077ed;
			transform: scale(1.02);
			color: #ffffff;
		}
		
		.btn-primary:active {
			transform: scale(0.98);
		}
		
		.btn-outline-primary {
			border: 1px solid rgba(255, 255, 255, 0.2);
			color: #f5f5f7;
			background: rgba(29, 29, 31, 0.6);
			border-radius: 12px;
			font-weight: 500;
			font-size: 0.9375rem;
			padding: 0.625rem 1.25rem;
		}
		
		.btn-outline-primary:hover {
			background: rgba(255, 255, 255, 0.1);
			border-color: rgba(255, 255, 255, 0.3);
			color: #ffffff;
			transform: scale(1.02);
		}
		
		.btn-danger {
			background: #ff3b30;
			border: none;
			border-radius: 12px;
			font-weight: 500;
			font-size: 0.9375rem;
			color: #ffffff;
		}
		
		.btn-danger:hover {
			background: #ff453a;
			transform: scale(1.02);
			color: #ffffff;
		}
		
		.btn-outline-danger {
			border: 1px solid rgba(255, 59, 48, 0.5);
			color: #ff3b30;
			background: rgba(29, 29, 31, 0.6);
			border-radius: 12px;
			font-weight: 500;
			font-size: 0.9375rem;
		}
		
		.btn-outline-danger:hover {
			background: rgba(255, 59, 48, 0.2);
			border-color: #ff3b30;
			color: #ff3b30;
		}
		
		.btn-outline-secondary {
			border: 1px solid rgba(255, 255, 255, 0.2);
			color: #86868b;
			background: rgba(29, 29, 31, 0.6);
			border-radius: 12px;
			font-weight: 500;
		}
		
		.btn-outline-secondary:hover {
			background: rgba(255, 255, 255, 0.1);
			border-color: rgba(255, 255, 255, 0.3);
			color: #f5f5f7;
		}
		
		.btn-outline-info {
			border: 1px solid rgba(0, 113, 227, 0.5);
			color: #0071e3;
			background: rgba(29, 29, 31, 0.6);
			border-radius: 12px;
			font-weight: 500;
		}
		
		.btn-outline-info:hover {
			background: rgba(0, 113, 227, 0.15);
			border-color: #0071e3;
			color: #0071e3;
		}
		
		.btn-sm {
			padding: 0.375rem 0.875rem;
			font-size: 0.875rem;
		}
		
		.form-control, .form-select {
			border-radius: 12px;
			border: 1px solid rgba(255, 255, 255, 0.1);
			padding: 0.625rem 1rem;
			font-size: 0.9375rem;
			color: #f5f5f7;
			background: rgba(29, 29, 31, 0.6);
		}
		
		.form-control:focus, .form-select:focus {
			border-color: #0071e3;
			box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.2);
			outline: none;
			background: rgba(29, 29, 31, 0.8);
			color: #f5f5f7;
		}
		
		.form-control::placeholder {
			color: #86868b;
		}
		
		.alert {
			border-radius: 12px;
			border: none;
			padding: 0.875rem 1.25rem;
			font-size: 0.9375rem;
			font-weight: 400;
		}
		
		.alert-success {
			background: rgba(34, 197, 94, 0.15);
			color: #4ade80;
			border: 0.5px solid rgba(34, 197, 94, 0.3);
		}
		
		.alert-danger {
			background: rgba(239, 68, 68, 0.15);
			color: #f87171;
			border: 0.5px solid rgba(239, 68, 68, 0.3);
		}
		
		.alert-warning {
			background: rgba(251, 191, 36, 0.15);
			color: #fbbf24;
			border: 0.5px solid rgba(251, 191, 36, 0.3);
		}
		
		.alert-info {
			background: rgba(0, 113, 227, 0.15);
			color: #60a5fa;
			border: 0.5px solid rgba(0, 113, 227, 0.3);
		}
		
		/* Estilos para todas las tablas */
		table, .table, table.table {
			border-radius: 12px;
			overflow: hidden;
			background: #000000 !important;
			color: #f5f5f7 !important;
			border: 0.5px solid rgba(255, 255, 255, 0.1) !important;
		}
		
		table thead, .table thead, table.table thead {
			background: #000000 !important;
		}
		
		table thead th, .table thead th, table.table thead th {
			border: none !important;
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.1) !important;
			padding: 1rem 1.25rem !important;
			font-weight: 600;
			font-size: 0.875rem;
			color: #86868b !important;
			text-transform: uppercase;
			letter-spacing: 0.02em;
			background: #000000 !important;
		}
		
		table tbody, .table tbody, table.table tbody {
			background: #000000 !important;
		}
		
		table tbody td, .table tbody td, table.table tbody td {
			border-top: 0.5px solid rgba(255, 255, 255, 0.05) !important;
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.05) !important;
			padding: 1rem 1.25rem !important;
			font-size: 0.9375rem;
			color: #f5f5f7 !important;
			background: #000000 !important;
		}
		
		table tbody tr, .table tbody tr, table.table tbody tr {
			transition: background-color 0.15s ease;
			background: #000000 !important;
		}
		
		table tbody tr:hover, .table tbody tr:hover, table.table tbody tr:hover {
			background: rgba(255, 255, 255, 0.05) !important;
		}
		
		table tbody tr:nth-child(even), .table tbody tr:nth-child(even), table.table tbody tr:nth-child(even) {
			background: rgba(29, 29, 31, 0.3) !important;
		}
		
		table tbody tr:nth-child(even):hover, .table tbody tr:nth-child(even):hover, table.table tbody tr:nth-child(even):hover {
			background: rgba(255, 255, 255, 0.08) !important;
		}
		
		/* Estilos para tablas generadas por pandas o DataFrames */
		.dataframe, .pandas-table {
			background: #000000 !important;
			color: #f5f5f7 !important;
			border: 0.5px solid rgba(255, 255, 255, 0.1) !important;
		}
		
		.dataframe thead, .pandas-table thead {
			background: #000000 !important;
		}
		
		.dataframe thead th, .pandas-table thead th {
			background: #000000 !important;
			color: #86868b !important;
			border: none !important;
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.1) !important;
		}
		
		.dataframe tbody, .pandas-table tbody {
			background: #000000 !important;
		}
		
		.dataframe tbody td, .pandas-table tbody td {
			background: #000000 !important;
			color: #f5f5f7 !important;
			border: none !important;
			border-bottom: 0.5px solid rgba(255, 255, 255, 0.05) !important;
		}
		
		.dataframe tbody tr, .pandas-table tbody tr {
			background: #000000 !important;
		}
		
		.dataframe tbody tr:hover, .pandas-table tbody tr:hover {
			background: rgba(255, 255, 255, 0.05) !important;
		}
		
		/* Estilos para gráficos de Plotly - fondo negro */
		.plotly, .js-plotly-plot, [id^="pareto"], [id^="hist"], [id^="disp"], [id^="ishikawa"] {
			background: #000000 !important;
		}
		
		.plotly .modebar {
			background: rgba(0, 0, 0, 0.8) !important;
		}
		
		.plotly .modebar-btn {
			color: #f5f5f7 !important;
		}
		
		.plotly .modebar-btn:hover {
			background: rgba(255, 255, 255, 0.1) !important;
		}
		
		h3 {
			font-family: 'PPNeueMachina', sans-serif;
			font-weight: normal;
			font-size: 1.75rem;
			color: #f5f5f7;
			letter-spacing: -0.02em;
			margin-bottom: 1.5rem;
		}
		
		.navbar-text {
			color: #86868b !important;
			font-weight: 400;
			font-size: 0.9375rem;
		}
		
		main {
			max-width: 1200px;
			position: relative;
			z-index: 1;
		}
		
		.card {
			position: relative;
			z-index: 1;
		}
		
		table, .table {
			position: relative;
			z-index: 1;
		}
		
		.list-unstyled li {
			padding: 0.5rem 0;
			font-size: 0.9375rem;
			color: #86868b;
		}
		
		.list-unstyled li strong {
			color: #f5f5f7;
			font-weight: 600;
		}
		
		label {
			color: #f5f5f7;
			font-weight: 500;
			font-size: 0.9375rem;
			margin-bottom: 0.5rem;
		}
		
		.text-muted {
			color: #86868b !important;
		}
		
		.badge {
			font-size: 0.75rem;
			padding: 0.375rem 0.625rem;
			border-radius: 6px;
			font-weight: 500;
			letter-spacing: 0.01em;
		}
		
		.bg-success {
			background-color: #34d399 !important;
			color: #000000;
		}
		
		.bg-primary {
			background-color: #0071e3 !important;
			color: #ffffff;
		}
		
		.bg-danger {
			background-color: #ff3b30 !important;
			color: #ffffff;
		}
		
		.bg-secondary {
			background-color: #86868b !important;
			color: #ffffff;
		}
		
		code {
			background: rgba(255, 255, 255, 0.1);
			padding: 0.25rem 0.5rem;
			border-radius: 4px;
			font-size: 0.875rem;
			color: #0071e3;
		}
		
		.dropdown-divider {
			border-color: rgba(255, 255, 255, 0.1);
			margin: 0.5rem 0;
		}
		
		pre {
			background: rgba(0, 0, 0, 0.5) !important;
			border: 0.5px solid rgba(255, 255, 255, 0.1);
			border-radius: 8px;
			font-family: 'Courier New', monospace;
			white-space: pre-wrap;
			word-wrap: break-word;
		}
	</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="/">Indicadores ITT</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="nav">
				<ul class="navbar-nav me-auto">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Datos</a>
						<ul class="dropdown-menu">
							<li><a class="dropdown-item" href="/data/estudiantes">Estudiantes</a></li>
							<li><a class="dropdown-item" href="/data/materias">Materias</a></li>
							{% if current_user.is_authenticated and current_user.is_admin() %}
							<li><a class="dropdown-item" href="/data/carreras">Carreras</a></li>
							{% endif %}
							{% if current_user.is_authenticated and current_user.is_admin() %}
							<li><a class="dropdown-item" href="/data/import">Importar Excel</a></li>
							{% endif %}
							{% if current_user.is_authenticated and current_user.is_admin() %}
							<li><hr class="dropdown-divider"></li>
							<li><a class="dropdown-item" href="/data/auditoria">Auditoría</a></li>
							{% endif %}
						</ul>
					</li>
				</ul>
				<ul class="navbar-nav">
					{% if current_user.is_authenticated %}
					<li class="nav-item"><span class="navbar-text me-3">{{ current_user.nombre }}</span></li>
					<li class="nav-item"><a class="nav-link" href="/auth/logout">Salir</a></li>
					{% else %}
					<li class="nav-item"><a class="nav-link" href="/auth/login">Entrar</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>
	<main class="container py-4">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<div class="mb-3">
					{% for category, message in messages %}
					<div class="alert alert-{{ category }}">{{ message }}</div>
					{% endfor %}
				</div>
			{% endif %}
		{% endwith %}
		{% block content %}{% endblock %}
	</main>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
